{{/* Shortcode: img
   Usage: {{< img src="images/foo.jpg" alt="Alt text" class="..." width="200" height="100" >}}
   Ensures the image `src` is passed through Hugo `relURL` so it's relative to the site's baseURL.
*/}}
{{/* compute relURL then strip the site base path (if any) so generated src is root-relative like /images/... */}}
{{ $raw := .Get "src" }}
{{ $src := "" }}
{{ if or (hasPrefix $raw "http://") (hasPrefix $raw "https://") }}
   {{ $src = $raw }}
{{ else if hasPrefix $raw "/" }}
   {{ $src = printf "%s%s" .Site.BaseURL (strings.TrimPrefix $raw "/") }}
{{ else }}
   {{ $src = $raw | absURL }}
{{ end }}
<img src="{{ $src }}"{{ with .Get "alt" }} alt="{{ . }}"{{ end }}{{ with .Get "class" }} class="{{ . }}"{{ end }}{{ with .Get "width" }} width="{{ . }}"{{ end }}{{ with .Get "height" }} height="{{ . }}"{{ end }}{{ with .Get "title" }} title="{{ . }}"{{ end }}>
